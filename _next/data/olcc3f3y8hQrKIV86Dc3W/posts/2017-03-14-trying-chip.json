{"pageProps":{"post":{"title":"Experiences with the C.H.I.P. 9$ Computer","content":"<!-- markdown-link-check-disable -->\n\n<p>This blog post explains my experiences with <a href=\"https://getchip.com/pages/chip\">C.H.I.P.</a> - the World&#39;s First $9 Computer.</p>\n<h3 id=\"reflash-chip\">Reflash CHIP</h3>\n<p>Browse <a href=\"http://flash.getchip.com/\">http://flash.getchip.com/</a></p>\n<blockquote>\n<p>Your CHIP details:</p>\n<ul>\n<li>Serial #: 162542130082604c</li>\n<li>NAND:Hynix 8G MLC</li>\n</ul>\n</blockquote>\n<ul>\n<li>Select image &quot;Headless 4.4&quot;</li>\n</ul>\n<p>Downloading file <code>stable-server-b149-Hynix_8G_MLC.chp</code> (312 MB)</p>\n<blockquote>\n<ul>\n<li>Serial #: 162542130082604c</li>\n<li>NAND:Hynix 8G MLC</li>\n<li>MD5 Hash: 165e3a2a2c9353e06b98136beac777eb</li>\n</ul>\n</blockquote>\n<h3 id=\"manually-configure-wi-fi-from-command-line\">Manually configure Wi-Fi from command line</h3>\n<p>See <a href=\"https://docs.getchip.com/chip.html#wifi-connection\">https://docs.getchip.com/chip.html#wifi-connection</a></p>\n<h3 id=\"install-tinc-on-chip\">Install TINC on C.H.I.P.</h3>\n<p>Based on the instructions at <a href=\"https://github.com/gmacario/tinc-ninuxto/blob/master/configuring-tinc-ninuxto-on-udoobuntu2.md\">https://github.com/gmacario/tinc-ninuxto/blob/master/configuring-tinc-ninuxto-on-udoobuntu2.md</a></p>\n<p>Logged as chip@chip, change default password for user <code>chip</code>, then configure hostname (let us choose <code>chipgm34</code> in our example)</p>\n<pre><code class=\"language-script\">password chip\necho &quot;chipgm32&quot; | sudo tee /etc/hostname\nsudo vi /etc/hosts      (Replace occurrences of old hostname with new)\n</code></pre>\n<p>Update installed Debian packages, then reboot to activate the changes</p>\n<pre><code class=\"language-script\">sudo apt update &amp;&amp; sudo apt -y dist-upgrade\nsudo reboot\n</code></pre>\n<p>As soon as the host is up and running, remote login via SSH as chip@chipgm32, then install TINC and other required pacakges</p>\n<pre><code class=\"language-script\">sudo apt -y install git rsync tinc\n</code></pre>\n<p>Clone the &quot;gmacario/tinc-ninuxto&quot; repository from GitHub</p>\n<pre><code class=\"language-script\">mkdir -p ~/MYGIT &amp;&amp;  cd ~/MYGIT\n[ ! -e tinc-ninuxto ] &amp;&amp; git clone https://github.com/gmacario/tinc-ninuxto\n</code></pre>\n<p>Create the local TINC configuration</p>\n<pre><code class=\"language-script\">cd ~/MYGIT/tinc-ninuxto &amp;&amp; git pull --all --prune &amp;&amp; \\\n  sudo mkdir -p /etc/tinc/ninuxto/hosts/ &amp;&amp; \\\n  sudo rsync -avz hosts/ /etc/tinc/ninuxto/hosts/\n</code></pre>\n<p>Customize TINC configuration files starting from some templates</p>\n<pre><code class=\"language-script\">sudo cp ~/MYGIT/tinc-ninuxto/sample-tinc.conf /etc/tinc/ninuxto/tinc.conf\nsudo vi /etc/tinc/ninuxto/tinc.conf      (Adjust Name=&quot;chipgm32&quot;)\n</code></pre>\n<pre><code class=\"language-script\">sudo cp ~/MYGIT/tinc-ninuxto/sample-tinc-up /etc/tinc/ninuxto/tinc-up\nsudo vi /etc/tinc/ninuxto/tinc-up        (Choose an available IP Address according to the table at README.md)\nsudo chmod 755 /etc/tinc/ninuxto/tinc-up\n</code></pre>\n<pre><code class=\"language-script\">sudo cp ~/MYGIT/tinc-ninuxto/sample-tinc-down /etc/tinc/ninuxto/tinc-down\nsudo vi /etc/tinc/ninuxto/tinc-down      (Everything should be OK, but double check)\nsudo chmod 755 /etc/tinc/ninuxto/tinc-down\n</code></pre>\n<p>Create a public/private key pair if they do not exist</p>\n<pre><code class=\"language-script\">sudo -i sh -c &quot;[ ! -e /etc/tinc/ninuxto/rsa_key.priv ] &amp;&amp; /usr/sbin/tincd -n ninuxto -K4096&quot;\n</code></pre>\n<p>Accept the suggested paths where to save private and public RSA key.</p>\n<p>Submit a Pull Request to <a href=\"https://github.com/gmacario/tinc-ninuxto\">https://github.com/gmacario/tinc-ninuxto</a> with the following changes:</p>\n<ul>\n<li>A new line in the table at <code>README.md</code> to mark the IP address you chose for your node</li>\n<li>Your <strong>public</strong> key <code>/etc/tinc/ninuxto/hosts/chipgm32</code> saved under <code>hosts/</code></li>\n</ul>\n<p>After the PR is merged, update the gmacario/tinc-ninuxto repository in all your peer nodes (i.e. tincgw21, rpi3gm23) to make sure the new node is recognized.</p>\n<h5 id=\"test-connectivity-to-tinc-ninuxto\">Test connectivity to tinc-ninuxto</h5>\n<p>Try connecting to TINC network ninuxto</p>\n<pre><code class=\"language-script\">sudo tincd -n ninuxto --no-detach -d7\n</code></pre>\n<h5 id=\"automatically-start-tinc-at-boot\">Automatically start tinc at boot</h5>\n<p>Type the following commands to have TINC network <code>ninuxto</code> active at boot:</p>\n<pre><code>echo &quot;ninuxto&quot; | sudo tee -a /etc/tinc/nets.boot\nsudo service tinc restart\n</code></pre>\n<h3 id=\"install-docker-on-tinc\">Install Docker on TINC</h3>\n<p>See <a href=\"https://blog.hypriot.com/post/docker-supported-on-chip-computer/\">https://blog.hypriot.com/post/docker-supported-on-chip-computer/</a></p>\n<p>Prerequisite: chip running the latest Debian image (headless) with kernel 4.4</p>\n<pre><code class=\"language-script\">chip@chipgm32:~$ cat /etc/os-release\nPRETTY_NAME=&quot;Debian GNU/Linux 8 (jessie)&quot;\nNAME=&quot;Debian GNU/Linux&quot;\nVERSION_ID=&quot;8&quot;\nVERSION=&quot;8 (jessie)&quot;\nID=debian\nHOME_URL=&quot;http://www.debian.org/&quot;\nSUPPORT_URL=&quot;http://www.debian.org/support&quot;\nBUG_REPORT_URL=&quot;https://bugs.debian.org/&quot;\nchip@chipgm32:~$ uname -a\nLinux chipgm32 4.4.13-ntc-mlc #1 SMP Tue Dec 6 21:38:00 UTC 2016 armv7l GNU/Linux\nchip@chipgm32:~$\n</code></pre>\n<p>Login as <code>root</code> on the chip</p>\n<pre><code class=\"language-script\">chip@chipgm32:~$ sudo -i\nroot@chipgm32:~#\n</code></pre>\n<!-- 2017-03-13 14:55 CET -->\n\n<p>Logged as root@chip, install Docker using the official script</p>\n<pre><code class=\"language-script\">curl -sSL https://get.docker.com | sh\n</code></pre>\n<p>Result:</p>\n<pre><code class=\"language-script\">root@chipgm32:~# curl -sSL https://get.docker.com | sh\nmodprobe: FATAL: Module aufs not found.\nWarning: current kernel is not supported by the linux-image-extra-virtual\n package.  We have no AUFS support.  Consider installing the packages\n linux-image-virtual kernel and linux-image-extra-virtual for AUFS support.\n+ sleep 10\n+ sh -c &#39;sleep 3; apt-get update&#39;\nHit http://security.debian.org jessie/updates InRelease\nHit http://opensource.nextthing.co jessie InRelease\nHit http://http.debian.net jessie-backports InRelease\nHit http://security.debian.org jessie/updates/main Sources\nIgn http://ftp.us.debian.org jessie InRelease\nHit http://security.debian.org jessie/updates/contrib Sources\nHit http://security.debian.org jessie/updates/non-free Sources\nHit http://security.debian.org jessie/updates/main armhf Packages\nHit http://ftp.us.debian.org jessie Release.gpg\nHit http://security.debian.org jessie/updates/contrib armhf Packages\nHit http://security.debian.org jessie/updates/non-free armhf Packages\nHit http://security.debian.org jessie/updates/contrib Translation-en\nHit http://opensource.nextthing.co jessie/main armhf Packages\nHit http://security.debian.org jessie/updates/main Translation-en\nHit http://security.debian.org jessie/updates/non-free Translation-en\nHit http://ftp.us.debian.org jessie Release\nIgn http://opensource.nextthing.co jessie/main Translation-en\nGet:1 http://http.debian.net jessie-backports/main Sources/DiffIndex [27.8 kB]\nGet:2 http://http.debian.net jessie-backports/contrib Sources/DiffIndex [27.4 kB]\nGet:3 http://http.debian.net jessie-backports/non-free Sources/DiffIndex [20.0 kB]\nGet:4 http://http.debian.net jessie-backports/main armhf Packages/DiffIndex [27.8 kB]\nGet:5 http://http.debian.net jessie-backports/contrib armhf Packages/DiffIndex [24.1 kB]\nGet:6 http://http.debian.net jessie-backports/non-free armhf Packages/DiffIndex [7054 B]\nGet:7 http://http.debian.net jessie-backports/contrib Translation-en/DiffIndex [6484 B]\nGet:8 http://http.debian.net jessie-backports/main Translation-en/DiffIndex [27.8 kB]\nGet:9 http://http.debian.net jessie-backports/non-free Translation-en/DiffIndex [14.7 kB]\nHit http://ftp.us.debian.org jessie/main Sources\nHit http://ftp.us.debian.org jessie/contrib Sources\nHit http://ftp.us.debian.org jessie/non-free Sources\nHit http://ftp.us.debian.org jessie/main armhf Packages\nHit http://ftp.us.debian.org jessie/contrib armhf Packages\nHit http://ftp.us.debian.org jessie/non-free armhf Packages\nHit http://ftp.us.debian.org jessie/contrib Translation-en\nHit http://ftp.us.debian.org jessie/main Translation-en\nHit http://ftp.us.debian.org jessie/non-free Translation-en\nFetched 183 kB in 1min 4s (2852 B/s)\nReading package lists... Done\n+ sh -c &#39;sleep 3; apt-get install -y -q apt-transport-https ca-certificates&#39;\nReading package lists...\nBuilding dependency tree...\nReading state information...\nca-certificates is already the newest version.\nThe following NEW packages will be installed:\n  apt-transport-https\n0 upgraded, 1 newly installed, 0 to remove and 0 not upgraded.\nNeed to get 135 kB of archives.\nAfter this operation, 170 kB of additional disk space will be used.\nGet:1 http://ftp.us.debian.org/debian/ jessie/main apt-transport-https armhf 1.0.9.8.4 [135 kB]\nFetched 135 kB in 1s (98.1 kB/s)\nSelecting previously unselected package apt-transport-https.\n(Reading database ... 22131 files and directories currently installed.)\nPreparing to unpack .../apt-transport-https_1.0.9.8.4_armhf.deb ...\nUnpacking apt-transport-https (1.0.9.8.4) ...\nSetting up apt-transport-https (1.0.9.8.4) ...\n+ sh -c &#39;sleep 3; apt-get install -y -q dirmngr&#39;\nReading package lists...\nBuilding dependency tree...\nReading state information...\nThe following extra packages will be installed:\n  libassuan0 libksba8 libpth20\nThe following NEW packages will be installed:\n  dirmngr libassuan0 libksba8 libpth20\n0 upgraded, 4 newly installed, 0 to remove and 0 not upgraded.\nNeed to get 360 kB of archives.\nAfter this operation, 881 kB of additional disk space will be used.\nGet:1 http://ftp.us.debian.org/debian/ jessie/main libassuan0 armhf 2.1.2-2 [29.9 kB]\nGet:2 http://ftp.us.debian.org/debian/ jessie/main libksba8 armhf 1.3.2-1+deb8u1 [82.1 kB]\nGet:3 http://ftp.us.debian.org/debian/ jessie/main libpth20 armhf 2.0.7-20 [73.6 kB]\nFetched 360 kB in 1s (251 kB/s)\nSelecting previously unselected package libassuan0:armhf.\n(Reading database ... 22137 files and directories currently installed.)\nPreparing to unpack .../libassuan0_2.1.2-2_armhf.deb ...\nUnpacking libassuan0:armhf (2.1.2-2) ...\nSelecting previously unselected package libksba8:armhf.\nPreparing to unpack .../libksba8_1.3.2-1+deb8u1_armhf.deb ...\nUnpacking libksba8:armhf (1.3.2-1+deb8u1) ...\nSelecting previously unselected package libpth20:armhf.\nPreparing to unpack .../libpth20_2.0.7-20_armhf.deb ...\nUnpacking libpth20:armhf (2.0.7-20) ...\nSelecting previously unselected package dirmngr.\nPreparing to unpack .../dirmngr_1.1.1-5_armhf.deb ...\nUnpacking dirmngr (1.1.1-5) ...\nProcessing triggers for man-db (2.7.0.2-5) ...\nProcessing triggers for systemd (215-17+deb8u6) ...\nSetting up libassuan0:armhf (2.1.2-2) ...\nSetting up libksba8:armhf (1.3.2-1+deb8u1) ...\nSetting up libpth20:armhf (2.0.7-20) ...\nSetting up dirmngr (1.1.1-5) ...\nProcessing triggers for libc-bin (2.19-18+deb8u7) ...\nProcessing triggers for systemd (215-17+deb8u6) ...\n+ for key_server in &#39;$key_servers&#39;\n+ sh -c &#39;apt-key adv --keyserver hkp://ha.pool.sks-keyservers.net:80 --recv-keys 58118E89F3A912897C070ADBF76221572C52609D&#39;\nExecuting: gpg --ignore-time-conflict --no-options --no-default-keyring --homedir /tmp/tmp.SQycH2Vhju --no-auto-check-trustdb --trust-model always --keyring /etc/apt/trusted.gpg --primary-keyring /etc/apt/trusted.gpg --keyring /etc/apt/trusted.gpg.d/debian-archive-jessie-automatic.gpg --keyring /etc/apt/trusted.gpg.d/debian-archive-jessie-security-automatic.gpg --keyring /etc/apt/trusted.gpg.d/debian-archive-jessie-stable.gpg --keyring /etc/apt/trusted.gpg.d/debian-archive-squeeze-automatic.gpg --keyring /etc/apt/trusted.gpg.d/debian-archive-squeeze-stable.gpg --keyring /etc/apt/trusted.gpg.d/debian-archive-wheezy-automatic.gpg --keyring /etc/apt/trusted.gpg.d/debian-archive-wheezy-stable.gpg --keyserver hkp://ha.pool.sks-keyservers.net:80 --recv-keys 58118E89F3A912897C070ADBF76221572C52609D\ngpg: requesting key 2C52609D from hkp server ha.pool.sks-keyservers.net\ngpg: key 2C52609D: public key &quot;Docker Release Tool (releasedocker) &lt;docker@docker.com&gt;&quot; imported\ngpg: Total number processed: 1\ngpg:               imported: 1  (RSA: 1)\n+ break\n+ sh -c &#39;apt-key adv -k 58118E89F3A912897C070ADBF76221572C52609D &gt;/dev/null&#39;\n+ sh -c &#39;mkdir -p /etc/apt/sources.list.d&#39;\n++ dpkg --print-architecture\n+ sh -c &#39;echo deb \\[arch=armhf\\] https://apt.dockerproject.org/repo debian-jessie main &gt; /etc/apt/sources.list.d/docker.list&#39;\n+ sh -c &#39;sleep 3; apt-get update; apt-get install -y -q docker-engine&#39;\nHit http://security.debian.org jessie/updates InRelease\nIgn http://ftp.us.debian.org jessie InRelease\nHit http://opensource.nextthing.co jessie InRelease\nGet:1 https://apt.dockerproject.org debian-jessie InRelease [30.2 kB]\nHit http://ftp.us.debian.org jessie Release.gpg\nHit http://http.debian.net jessie-backports InRelease\nHit http://ftp.us.debian.org jessie Release\nHit http://security.debian.org jessie/updates/main Sources\nHit http://security.debian.org jessie/updates/contrib Sources\nHit http://security.debian.org jessie/updates/non-free Sources\nHit http://security.debian.org jessie/updates/main armhf Packages\nHit http://security.debian.org jessie/updates/contrib armhf Packages\nHit http://security.debian.org jessie/updates/non-free armhf Packages\nHit http://opensource.nextthing.co jessie/main armhf Packages\nHit http://security.debian.org jessie/updates/contrib Translation-en\nHit http://security.debian.org jessie/updates/main Translation-en\nHit http://security.debian.org jessie/updates/non-free Translation-en\nGet:2 https://apt.dockerproject.org debian-jessie/main armhf Packages [3029 B]\nGet:3 https://apt.dockerproject.org debian-jessie/main Translation-en [454 B]\nGet:4 https://apt.dockerproject.org debian-jessie/main Translation-en [454 B]\nGet:5 https://apt.dockerproject.org debian-jessie/main Translation-en [454 B]\nGet:6 https://apt.dockerproject.org debian-jessie/main Translation-en [454 B]\nGet:7 https://apt.dockerproject.org debian-jessie/main Translation-en [454 B]\nIgn https://apt.dockerproject.org debian-jessie/main Translation-en\nIgn http://opensource.nextthing.co jessie/main Translation-en\nGet:8 http://http.debian.net jessie-backports/main Sources/DiffIndex [27.8 kB]\nGet:9 http://http.debian.net jessie-backports/contrib Sources/DiffIndex [27.4 kB]\nGet:10 http://http.debian.net jessie-backports/non-free Sources/DiffIndex [20.0 kB]\nGet:11 http://http.debian.net jessie-backports/main armhf Packages/DiffIndex [27.8 kB]\nHit http://ftp.us.debian.org jessie/main Sources\nGet:12 http://http.debian.net jessie-backports/contrib armhf Packages/DiffIndex [24.1 kB]\nGet:13 http://http.debian.net jessie-backports/non-free armhf Packages/DiffIndex [7054 B]\nGet:14 http://http.debian.net jessie-backports/contrib Translation-en/DiffIndex [6484 B]\nGet:15 http://http.debian.net jessie-backports/main Translation-en/DiffIndex [27.8 kB]\nGet:16 http://http.debian.net jessie-backports/non-free Translation-en/DiffIndex [14.7 kB]\nHit http://ftp.us.debian.org jessie/contrib Sources\nHit http://ftp.us.debian.org jessie/non-free Sources\nHit http://ftp.us.debian.org jessie/main armhf Packages\nHit http://ftp.us.debian.org jessie/contrib armhf Packages\nHit http://ftp.us.debian.org jessie/non-free armhf Packages\nHit http://ftp.us.debian.org jessie/contrib Translation-en\nHit http://ftp.us.debian.org jessie/main Translation-en\nHit http://ftp.us.debian.org jessie/non-free Translation-en\nReading package lists... Done\nReading package lists...\nBuilding dependency tree...\nReading state information...\nThe following extra packages will be installed:\n  aufs-tools cgroupfs-mount libapparmor1 libdrm2 libltdl7 libnih-dbus1 libnih1 libpng12-0 makedev\n  mountall plymouth\nSuggested packages:\n  desktop-base plymouth-themes\nThe following NEW packages will be installed:\n  aufs-tools cgroupfs-mount docker-engine libapparmor1 libdrm2 libltdl7 libnih-dbus1 libnih1\n  libpng12-0 makedev mountall plymouth\n0 upgraded, 12 newly installed, 0 to remove and 0 not upgraded.\nNeed to get 17.4 MB of archives.\nAfter this operation, 80.4 MB of additional disk space will be used.\nGet:1 http://ftp.us.debian.org/debian/ jessie/main libdrm2 armhf 2.4.58-2 [27.6 kB]\nGet:2 http://ftp.us.debian.org/debian/ jessie/main libltdl7 armhf 2.4.2-1.11 [42.3 kB]\nGet:3 https://apt.dockerproject.org/repo/ debian-jessie/main docker-engine armhf 17.03.0~ce-0~debian-jessie [16.5 MB]\nGet:4 http://ftp.us.debian.org/debian/ jessie/main libpng12-0 armhf 1.2.50-2+deb8u3 [162 kB]\nGet:5 http://ftp.us.debian.org/debian/ jessie/main makedev all 2.3.1-93 [42.6 kB]\nGet:6 http://ftp.us.debian.org/debian/ jessie/main plymouth armhf 0.9.0-9 [166 kB]\nGet:7 http://ftp.us.debian.org/debian/ jessie/main libnih1 armhf 1.0.3-4.3 [123 kB]\nGet:8 http://ftp.us.debian.org/debian/ jessie/main libnih-dbus1 armhf 1.0.3-4.3 [96.2 kB]\nGet:9 http://ftp.us.debian.org/debian/ jessie/main mountall armhf 2.54 [68.1 kB]\nGet:10 http://ftp.us.debian.org/debian/ jessie/main aufs-tools armhf 1:3.2+20130722-1.1 [91.6 kB]\nGet:11 http://ftp.us.debian.org/debian/ jessie/main cgroupfs-mount all 1.1 [4572 B]\nGet:12 http://ftp.us.debian.org/debian/ jessie/main libapparmor1 armhf 2.9.0-3 [57.8 kB]\nFetched 17.4 MB in 12s (1439 kB/s)\nSelecting previously unselected package libdrm2:armhf.\n(Reading database ... 22249 files and directories currently installed.)\nPreparing to unpack .../libdrm2_2.4.58-2_armhf.deb ...\nUnpacking libdrm2:armhf (2.4.58-2) ...\nSelecting previously unselected package libltdl7:armhf.\nPreparing to unpack .../libltdl7_2.4.2-1.11_armhf.deb ...\nUnpacking libltdl7:armhf (2.4.2-1.11) ...\nSelecting previously unselected package libpng12-0:armhf.\nPreparing to unpack .../libpng12-0_1.2.50-2+deb8u3_armhf.deb ...\nUnpacking libpng12-0:armhf (1.2.50-2+deb8u3) ...\nSelecting previously unselected package makedev.\nPreparing to unpack .../makedev_2.3.1-93_all.deb ...\nUnpacking makedev (2.3.1-93) ...\nSelecting previously unselected package plymouth.\nPreparing to unpack .../plymouth_0.9.0-9_armhf.deb ...\nUnpacking plymouth (0.9.0-9) ...\nSelecting previously unselected package libnih1.\nPreparing to unpack .../libnih1_1.0.3-4.3_armhf.deb ...\nUnpacking libnih1 (1.0.3-4.3) ...\nSelecting previously unselected package libnih-dbus1.\nPreparing to unpack .../libnih-dbus1_1.0.3-4.3_armhf.deb ...\nUnpacking libnih-dbus1 (1.0.3-4.3) ...\nSelecting previously unselected package mountall.\nPreparing to unpack .../mountall_2.54_armhf.deb ...\nUnpacking mountall (2.54) ...\nSelecting previously unselected package aufs-tools.\nPreparing to unpack .../aufs-tools_1%3a3.2+20130722-1.1_armhf.deb ...\nUnpacking aufs-tools (1:3.2+20130722-1.1) ...\nSelecting previously unselected package cgroupfs-mount.\nPreparing to unpack .../cgroupfs-mount_1.1_all.deb ...\nUnpacking cgroupfs-mount (1.1) ...\nSelecting previously unselected package libapparmor1:armhf.\nPreparing to unpack .../libapparmor1_2.9.0-3_armhf.deb ...\nUnpacking libapparmor1:armhf (2.9.0-3) ...\nSelecting previously unselected package docker-engine.\nProcessing triggers for dbus (1.8.22-0+deb8u1) ...\nSetting up libdrm2:armhf (2.4.58-2) ...\nSetting up libltdl7:armhf (2.4.2-1.11) ...\nSetting up libpng12-0:armhf (1.2.50-2+deb8u3) ...\nSetting up makedev (2.3.1-93) ...\n/run/udev or .udevdb or .udev presence implies active udev.  Aborting MAKEDEV invocation.\n/run/udev or .udevdb or .udev presence implies active udev.  Aborting MAKEDEV invocation.\n/run/udev or .udevdb or .udev presence implies active udev.  Aborting MAKEDEV invocation.\n/run/udev or .udevdb or .udev presence implies active udev.  Aborting MAKEDEV invocation.\nSetting up plymouth (0.9.0-9) ...\nupdate-initramfs: deferring update (trigger activated)\nupdate-rc.d: warning: start and stop actions are no longer supported; falling back to defaults\nupdate-rc.d: warning: start and stop actions are no longer supported; falling back to defaults\nSetting up libnih1 (1.0.3-4.3) ...\nSetting up libnih-dbus1 (1.0.3-4.3) ...\nSetting up mountall (2.54) ...\nSetting up aufs-tools (1:3.2+20130722-1.1) ...\nSetting up cgroupfs-mount (1.1) ...\nSetting up libapparmor1:armhf (2.9.0-3) ...\nSetting up docker-engine (17.03.0~ce-0~debian-jessie) ...\nProcessing triggers for libc-bin (2.19-18+deb8u7) ...\nProcessing triggers for systemd (215-17+deb8u6) ...\nProcessing triggers for initramfs-tools (0.120+deb8u2) ...\nupdate-initramfs: Generating /boot/initrd.img-4.4.13-ntc-mlc\nWarning: root device  does not exist\nDTB: sun5i-r8-chip.dtb\nInstalling sun5i-r8-chip.dtb into /boot/dtbs/4.4.13-ntc-mlc/sun5i-r8-chip.dtb\nTaking backup of sun5i-r8-chip.dtb.\nInstalling new sun5i-r8-chip.dtb.\nInstalling sun5i-r8-chip.dtb into /boot/dtbs/4.4.13-ntc-mlc/sun5i-r8-chip.dtb\nTaking backup of sun5i-r8-chip.dtb.\nInstalling new sun5i-r8-chip.dtb.\nflash-kernel: installing version 4.4.13-ntc-mlc\nTaking backup of zImage.\nInstalling new zImage.\nTaking backup of sun5i-r8-chip.dtb.\nInstalling new sun5i-r8-chip.dtb.\nProcessing triggers for dbus (1.8.22-0+deb8u1) ...\n+ sh -c &#39;docker version&#39;\nClient:\n Version:      17.03.0-ce\n API version:  1.26\n Go version:   go1.7.5\n Git commit:   60ccb22\n Built:        Thu Feb 23 11:36:35 2017\n OS/Arch:      linux/arm\n\nServer:\n Version:      17.03.0-ce\n API version:  1.26 (minimum version 1.12)\n Go version:   go1.7.5\n Git commit:   60ccb22\n Built:        Thu Feb 23 11:36:35 2017\n OS/Arch:      linux/arm\n Experimental: false\n\nIf you would like to use Docker as a non-root user, you should now consider\nadding your user to the &quot;docker&quot; group with something like:\n\n  sudo usermod -aG docker your-user\n\nRemember that you will have to log out and back in for this to take effect!\n\nroot@chipgm32:~#\n</code></pre>\n<p><strong>NOTE</strong>: The message above <code>modprobe: FATAL: Module aufs not found.</code>\nshould be harmless as Docker engine is using the overlay2 Storage Driver:</p>\n<pre><code class=\"language-script\">root@chipgm32:~# docker info\nContainers: 0\n Running: 0\n Paused: 0\n Stopped: 0\nImages: 0\nServer Version: 17.03.0-ce\nStorage Driver: overlay2\n Backing Filesystem: &lt;unknown&gt;\n Supports d_type: true\n Native Overlay Diff: false\nLogging Driver: json-file\nCgroup Driver: cgroupfs\nPlugins:\n Volume: local\n Network: bridge host macvlan null overlay\nSwarm: inactive\nRuntimes: runc\nDefault Runtime: runc\nInit Binary: docker-init\ncontainerd version: 977c511eda0925a723debdc94d09459af49d082a\nrunc version: a01dafd48bc1c7cc12bdb01206f9fea7dd6feb70\ninit version: 949e6fa\nKernel Version: 4.4.13-ntc-mlc\nOperating System: Debian GNU/Linux 8 (jessie)\nOSType: linux\nArchitecture: armv7l\nCPUs: 1\nTotal Memory: 491 MiB\nName: chipgm32\nID: X565:BNYG:ATBK:UNXA:BC7P:RIX2:HVNT:BKMG:7QSQ:ZH5N:ROLP:M4HB\nDocker Root Dir: /var/lib/docker\nDebug Mode (client): false\nDebug Mode (server): false\nRegistry: https://index.docker.io/v1/\nWARNING: No swap limit support\nWARNING: No kernel memory limit support\nExperimental: false\nInsecure Registries:\n 127.0.0.0/8\nLive Restore Enabled: false\nroot@chipgm32:~#\n</code></pre>\n<p>Add user <code>chip</code> to group <code>docker</code></p>\n<pre><code class=\"language-script\">sudo usermod -aG docker chip\n</code></pre>\n<p>Logout and login to apply the changes</p>\n<h4 id=\"run-your-first-docker-container-on-chipgm32\">Run your first Docker Container on chipgm32</h4>\n<p>Logged as chip@chipgm32</p>\n<pre><code class=\"language-script\">docker run -d -p 80:80 hypriot/rpi-busybox-httpd\n</code></pre>\n<p>Result:</p>\n<pre><code class=\"language-script\">root@chipgm32:~# docker run -d -p 80:80 hypriot/rpi-busybox-httpd\nUnable to find image &#39;hypriot/rpi-busybox-httpd:latest&#39; locally\nlatest: Pulling from hypriot/rpi-busybox-httpd\nc74a9c6a645f: Pull complete\n6f1938f6d8ae: Pull complete\ne1347d4747a6: Pull complete\na3ed95caeb02: Pull complete\nDigest: sha256:c00342f952d97628bf5dda457d3b409c37df687c859df82b9424f61264f54cd1\nStatus: Downloaded newer image for hypriot/rpi-busybox-httpd:latest\n0dcc31c2d196a7285391eb33437fdf7f3b75df295cf8724451ecf768b9cb3220\nroot@chipgm32:~#\n</code></pre>\n<p>Now browse <a href=\"http://192.168.64.206/\">http://192.168.64.206/</a> and verfiy that the webserver is up and running:</p>\n<h3 id=\"install-docker-compose-on-chipgm32\">Install docker-compose on chipgm32</h3>\n<!-- 2071-03-13 15:24 CET -->\n\n<p><strong>NOTE</strong>: As of 2017-03-13 there is no pre-built <code>docker-compose</code> binary for Linux/armv7l, therefore the following commands will return &quot;Not Found&quot;:</p>\n<pre><code class=\"language-script\">sudo curl -L &quot;https://github.com/docker/compose/releases/download/1.10.0/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-compose\nfile /usr/local/bin/docker-compose\nsudo chmod +x /usr/local/bin/docker-compose\n</code></pre>\n<p>Read <a href=\"https://github.com/hypriot/arm-compose\">https://github.com/hypriot/arm-compose</a></p>\n<p>See <a href=\"https://packagecloud.io/Hypriot/Schatzkiste/install\">https://packagecloud.io/Hypriot/Schatzkiste/install</a></p>\n<p>Logged as chip@chipgm32</p>\n<pre><code class=\"language-script\">curl -s https://packagecloud.io/install/repositories/Hypriot/Schatzkiste/script.deb.sh | sudo bash\n</code></pre>\n<p>Now install package <code>docker-compose</code></p>\n<pre><code class=\"language-script\">sudo apt install docker-compose\n</code></pre>\n<p>Test</p>\n<pre><code>chip@chipgm32:~ $ docker-compose --version\ndocker-compose version 1.9.0, build 2585387\npi@rpi3gm23:~ $\n</code></pre>\n<h3 id=\"run-portainer-on-chipgm32\">Run Portainer on chipgm32</h3>\n<p>See <a href=\"https://blog.hypriot.com/post/new-docker-ui-portainer/\">https://blog.hypriot.com/post/new-docker-ui-portainer/</a></p>\n<p>Prerequisites: docker and docker-compose already installed</p>\n<p>Login as chip@chipgm32 and type the following commands:</p>\n<pre><code class=\"language-script\">mkdir -p ~/MYGIT &amp;&amp; cd ~/MYGIT\ngit clone https://github.com/gmacario/rpi3-compose-portainer\ncd rpi3-compose-portainer\n</code></pre>\n<p>Now run the containers</p>\n<pre><code>docker-compose up -d\n</code></pre>\n<p>Browse <a href=\"http://192.168.64.206:9000\">http://192.168.64.206:9000</a> to access Portainer web UI.</p>\n<h3 id=\"configure-wi-fi-from-command-line\">Configure Wi-Fi from command line</h3>\n<!-- 2017-03-14 15:25 CET -->\n\n<p>See <a href=\"https://docs.getchip.com/chip.html#wifi-connection\">https://docs.getchip.com/chip.html#wifi-connection</a></p>\n<p>Connect via USB to your laptop,</p>\n<p>Using Windows Device Manager identify the new USB serial port created (in our example, COM21)</p>\n<p>Start PuTTY:COM21:115200,8,n,1, you will get a login prompt</p>\n<pre><code>Debian GNU/Linux 8 chipgm32 ttyGS0\n\nchipgm32 login:\n</code></pre>\n<p>Login as user <code>chip</code> (default password: <code>chip</code> but you should have already changed it, right?)</p>\n<p>Logged as chip@chipgm32, list available Wi-Fi networks</p>\n<pre><code class=\"language-script\">nmcli device wifi list\n</code></pre>\n<h4 id=\"connect-to-a-password-protected-wi-fi-network\">Connect to a password-protected Wi-Fi network</h4>\n<p>Logged as chip@chipgm32, type the following command</p>\n<pre><code class=\"language-script\">sudo nmcli device wifi connect &#39;(your wifi network name/SSID)&#39; password &#39;(your wifi password)&#39; ifname wlan0\n</code></pre>\n<h4 id=\"connect-to-a-hidden-wi-fi-network\">Connect to a hidden Wi-Fi network</h4>\n<p>Connect to a password-protected Wi-Fi network with the following commnand\n(reference: <a href=\"http://stackoverflow.com/questions/35476428/how-to-connect-to-hidden-wifi-network-using-nmcli\">http://stackoverflow.com/questions/35476428/how-to-connect-to-hidden-wifi-network-using-nmcli</a>)</p>\n<pre><code class=\"language-script\">sudo nmcli con add type wifi con-name &#39;(connection name)&#39; ifname wlan0 ssid &#39;(your wifi hidden ssid)&#39;\nsudo nmcli con modify &#39;(connection name)&#39; wifi-sec.key-mgmt wpa-psk\nsudo nmcli con modify &#39;(connection name)&#39; wifi-sec.psk &#39;(password)&#39;\nsudo nmcli con up &#39;(connection name)&#39;\n</code></pre>\n<p>Step 3: Test your Connection</p>\n<pre><code class=\"language-script\">nmcli device status\n</code></pre>\n<h3 id=\"see-also\">See also</h3>\n<ul>\n<li>C.H.I.P. Documentation: <a href=\"https://docs.getchip.com/chip.html\">https://docs.getchip.com/chip.html</a></li>\n</ul>\n<!-- markdown-link-check-enable -->\n<!-- EOF -->\n"},"config":{"title":"gmacario.github.io","description":"Gianpaolo Macario's public rants","social":{"github":{"name":"gmacario","link":"https://github.com/gmacario"},"twitter":{"name":"gpmacario","link":"https://www.twitter.com/gpmacario"}}}},"__N_SSG":true}