{"pageProps":{"post":{"title":"Using command-line git with GitHub 2FA","content":"<!-- markdown-link-check-disable -->\n\n<p>After enabling <a href=\"https://help.github.com/articles/securing-your-account-with-two-factor-authentication-2fa/\">two-factor authentication on my GitHub account</a> it seemed I became unable to push my local repositories from command-line git using the https transport.</p>\n<p>I was simply wrong, here what I did to fix the issue.</p>\n<h3 id=\"create-a-personal-access-token\">Create a Personal Access Token</h3>\n<p>Two-factor authentication in GitHub works by replacing your GitHub password with a Personal Access Token which can be different depending on the application you want to enable.</p>\n<p>To create a Personal Access Token, browse <a href=\"https://github.com/settings/tokens\">https://github.com/settings/tokens</a>, then click &quot;Generate new token&quot;.</p>\n<ul>\n<li>Provide a Token description, i.e. &quot;git @my-linux-laptop&quot;</li>\n<li>Select scopes. Select &quot;repo&quot; to have full control of private repositories</li>\n<li>Click &quot;Generate token&quot;</li>\n</ul>\n<p>Now from the command line perform some actions which require user authentication, for instance clone a private repository</p>\n<pre><code class=\"language-shell\">git clone https://github.com/myuser/my-private-repo\n</code></pre>\n<p>Alternatively, clone (via https) a repository you own, then commit a simple change and do <code>git push</code>.</p>\n<p>In either case git will request your GitHub credentials before proceeding.</p>\n<p>When requested for &quot;Username&quot; type your GitHub username (in my case, &quot;gmacario&quot;):</p>\n<pre><code>vagrant@ch1:~/github/gmacario/my-secret-repo$ git push -u origin master\nUsername for &#39;https://github.com&#39;: gmacario\nPassword for &#39;https://gmacario@github.com&#39;:\n</code></pre>\n<p>On the other hand, when requested for Password, DO NOT type your GitHub password.\nInstead, click the &quot;copy&quot; icon on the GitHub setting page, then paste your newly created Personal access token instead.</p>\n<h3 id=\"enable-git-credentials-cache-recommended\">Enable Git credentials cache (recommended)</h3>\n<p>To avoid providing the same credentials every time, you may enable the Git credentials cache through the following command:</p>\n<pre><code class=\"language-shell\">git config --global credential.helper cache\n</code></pre>\n<p>Through this configuration a daemon will be run to cache the provided credentials and avoid the user to be requested again.</p>\n<p>The default cache expiry timeout is 900 seconds (15 minutes) and can be changed with the <code>--timeout</code> option as follows:</p>\n<pre><code class=\"language-shell\">git config --global credential.helper &#39;cache --timeout=300&#39;\n</code></pre>\n<p>If you want the daemon to exit early, forgetting all cached credentials before their timeout, you can issue an exit action:</p>\n<pre><code class=\"language-shell\">git credential-cache exit\n</code></pre>\n<h3 id=\"alternative-enable-git-credentials-store\">Alternative: Enable Git credentials store</h3>\n<p>A less secure but more convenient way for saving your credentials is enabling the git-credential-store through the following command</p>\n<pre><code class=\"language-shell\">git config credential.helper store\n</code></pre>\n<p><strong>NOTE</strong>: The credentials will be saved unencrypted on a file inside your home directory, therefore use it with discretion.</p>\n<h3 id=\"see-also\">See also</h3>\n<ul>\n<li><a href=\"https://help.github.com/articles/providing-your-2fa-authentication-code/\">https://help.github.com/articles/providing-your-2fa-authentication-code/</a></li>\n<li><a href=\"https://git-scm.com/docs/git-credential-cache\">https://git-scm.com/docs/git-credential-cache</a></li>\n<li><a href=\"https://git-scm.com/docs/git-credential-store\">https://git-scm.com/docs/git-credential-store</a></li>\n</ul>\n<!-- markdown-link-check-enable -->\n<!-- EOF -->\n"},"config":{"title":"gmacario.github.io","description":"Gianpaolo Macario's public rants","social":{"github":{"name":"gmacario","link":"https://github.com/gmacario"},"twitter":{"name":"gpmacario","link":"https://www.twitter.com/gpmacario"}}}},"__N_SSG":true}