{"pageProps":{"post":{"title":"Building a Yocto image for the UDOO Neo","content":"<!-- markdown-link-check-disable -->\n\n<h3 id=\"introduction\">Introduction</h3>\n<p>In <a href=\"http://bit.ly/1Puczzk\">a previous post</a> I described how to run a prebuilt <a href=\"https://www.yoctoproject.org/\">Yocto Project</a> image on my <a href=\"http://www.udoo.org/udoo-neo/\">UDOO Neo</a>.</p>\n<p>This post explains how to build the micro SD card image directly from sources.</p>\n<h3 id=\"references\">References</h3>\n<ul>\n<li><a href=\"https://github.com/gmacario/genivi-demo-platform/tree/dev-udooneo-fido\">https://github.com/gmacario/genivi-demo-platform/tree/dev-udooneo-fido</a></li>\n</ul>\n<h2 id=\"step-by-step-instructions\">Step-by-step instructions</h2>\n<h3 id=\"building-the-image-from-sources\">Building the image from sources</h3>\n<ul>\n<li><a href=\"/images/build-yocto-udooneo-34-log.txt\">Build log</a><!-- - [original](http://mv-linux-powerhorse.solarma.it:9080/job/build-yocto-udooneo/34/consoleText) --></li>\n<li><a href=\"/images/core-image-minimal-udooneo-20151114142058.rootfs.sdcard\">Binary image</a> (24 MB)<!-- - [original](http://mv-linux-powerhorse.solarma.it:9080/job/build-yocto-udooneo/ws/gdp-src-build/tmp/deploy/images/udooneo/core-image-minimal-udooneo-20151114142058.rootfs.sdcard) --></li>\n</ul>\n<h3 id=\"testing-the-image-on-the-target\">Testing the image on the target</h3>\n<ul>\n<li><p>Download file <code>core-image-minimal-udooneo-20151114142058.rootfs.sdcard</code></p>\n<pre><code>gmacario@ITM-GMACARIO-W7 ~/Downloads\n$ md5sum core-image-minimal-udooneo-20151114142058.rootfs.sdcard\n610e75f4410cd70e32e3bb90e4edabd9 *core-image-minimal-udooneo-20151114142058.rootfs.sdcard\n\ngmacario@ITM-GMACARIO-W7 ~/Downloads\n$\n</code></pre>\n</li>\n<li><p>Write the <code>*.rootfs.sdcard</code> file (i.e. on Windows, use Win32DiskImager) onto a blank Micro SD</p>\n</li>\n<li><p>Insert the Micro SD</p>\n</li>\n<li><p>Watch U-Boot and Linux console messages on the debug serial</p>\n<p>```\nU-Boot 2014.04 (Nov 14 2015 - 16:02:05)</p>\n</li>\n</ul>\n<p>  CPU:   Freescale i.MX6SX rev1.2 at 792 MHz</p>\n<p>  CPU:   Temperature 35 C, calibration data: 0x59b50469</p>\n<p>  Reset cause: POR</p>\n<p>  Board: MX6SX UDOO NEO</p>\n<p>  I2C:   ready</p>\n<p>  DRAM:  1 GiB</p>\n<p>  MMC:   FSL_SDHC: 0, FSL_SDHC: 1</p>\n<p>  *** Warning - bad CRC, using default environment</p>\n<p>  In:    serial</p>\n<p>  Out:   serial</p>\n<p>  Err:   serial</p>\n<p>  Found PFUZE300! deviceid 0x30, revid 0x11</p>\n<p>  Net:   CPU Net Initialization Failed</p>\n<p>  No ethernet found.</p>\n<p>  Normal Boot</p>\n<p>  Hit any key to stop autoboot:  3  2  1  0</p>\n<p>  mmc0 is current device</p>\n<p>  reading uEnv.txt</p>\n<p>  ** Unable to read file uEnv.txt **</p>\n<p>  reading /zImage</p>\n<p>  4399520 bytes read in 247 ms (17 MiB/s)</p>\n<p>  Booting from mmc ...</p>\n<p>  reading imx6sx-udoo-neo-hdmi-m4.dtb</p>\n<p>  39414 bytes read in 19 ms (2 MiB/s)</p>\n<p>  Kernel image @ 0x80800000 [ 0x000000 - 0x4321a0 ]</p>\n<h2 id=\"flattened-device-tree-blob-at-83000000\">Flattened Device Tree blob at 83000000</h2>\n<pre><code> Booting using the fdt blob at 0x83000000\n\n Using Device Tree in place at 83000000, end 8300c9f5\n</code></pre>\n<p>  sono entrato in ldo_mode_set</p>\n<p>  setto i valori</p>\n<p>  valore di vddarm 19</p>\n<p>  switch to ldo_bypass mode!</p>\n<p>  Starting kernel ...</p>\n<p>  [    0.000000] Booting Linux on physical CPU 0x0\n  [    0.000000] Linux version 3.14.28_1.0.0_ga-udooboard+gb15f827 (root@148b793524e5) (gcc version 4.9.1 (GCC) ) #1 SMP PREEMPT Sat Nov 14 14:51:58 UTC 2015\n  [    0.000000] CPU: ARMv7 Processor [412fc09a] revision 10 (ARMv7), cr=10c53c7d\n  [    0.000000] CPU: PIPT / VIPT nonaliasing data cache, VIPT aliasing instruction cache\n  [    0.000000] Machine model: UDoo Neo (based on imx6 SoloX)\n  [    0.000000] Reserved memory: reserved region for node &#39;m4@0x84000000&#39;: base 0x84000000, size 8 MiB\n  [    0.000000] cma: CMA: reserved 320 MiB at aa000000\n  [    0.000000] Memory policy: Data cache writealloc\n  [    0.000000] PERCPU: Embedded 8 pages/cpu @bf63c000 s9152 r8192 d15424 u32768\n  [    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 257794\n  [    0.000000] Kernel command line: console=ttymxc0,115200 root=/dev/mmcblk0p2 rootwait rw consoleblank=0\n  [    0.000000] PID hash table entries: 4096 (order: 2, 16384 bytes)\n  [    0.000000] Dentry cache hash table entries: 131072 (order: 7, 524288 bytes)\n  [    0.000000] Inode-cache hash table entries: 65536 (order: 6, 262144 bytes)\n  [    0.000000] Memory: 690168K/1039360K available (5058K kernel code, 332K rwdata, 5656K rodata, 260K init, 384K bss, 349192K reserved, 0K highmem)\n  [    0.000000] Virtual kernel memory layout:\n  ...</p>\n<pre><code>\n  [Complete logfile](/images/20151115-1206-core-image-minimal-udooneo-20151114142058.txt)\n\n- When getting the `udooneo login:` prompt\n</code></pre>\n<p>  Poky (Yocto Project Reference Distro) 1.7.1 udooneo /dev/ttymxc0</p>\n<p>  udooneo login:</p>\n<pre><code>login as `root` (the default image has no password)\n\n### Some commands to inspect the target\n\n#### df -h\n</code></pre>\n<p>root@udooneo:<del># df -h\nFilesystem                Size      Used Available Use% Mounted on\n/dev/root                 6.7M      4.7M      1.6M  75% /\ndevtmpfs                337.0M         0    337.0M   0% /dev\ntmpfs                   497.1M     88.0K    497.0M   0% /run\ntmpfs                   497.1M     56.0K    497.1M   0% /var/volatile\nroot@udooneo:</del>#</p>\n<pre><code>\n#### cat /proc/cpuinfo\n</code></pre>\n<p>root@udooneo:~# cat /proc/cpuinfo\nprocessor       : 0\nmodel name      : ARMv7 Processor rev 10 (v7l)\nFeatures        : swp half thumb fastmult vfp edsp neon vfpv3 tls vfpd32\nCPU implementer : 0x41\nCPU architecture: 7\nCPU variant     : 0x2\nCPU part        : 0xc09\nCPU revision    : 10</p>\n<p>Hardware        : Freescale i.MX6 SoloX (Device Tree)\nRevision        : 0000\nSerial          : 0000000000000000\nroot@udooneo:~#</p>\n<pre><code>\n#### cat /proc/version\n</code></pre>\n<p>root@udooneo:<del># cat /proc/version\nLinux version 3.14.28_1.0.0_ga-udooboard+gb15f827 (root@148b793524e5) (gcc version 4.9.1 (GCC) ) #1 SMP PREEMPT Sat Nov 14 14:51:58 UTC 2015\nroot@udooneo:</del>#</p>\n<pre><code>\n#### ifconfig -a\n</code></pre>\n<p>root@udooneo:~# ifconfig -a\neth0      Link encap:Ethernet  HWaddr 00:C0:08:8C:14:E6\n          inet addr:192.168.64.107  Bcast:192.168.64.255  Mask:255.255.255.0\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n          RX packets:264 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:2 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:1000\n          RX bytes:30071 (29.3 KiB)  TX bytes:684 (684.0 B)</p>\n<p>lo        Link encap:Local Loopback\n          inet addr:127.0.0.1  Mask:255.0.0.0\n          UP LOOPBACK RUNNING  MTU:65536  Metric:1\n          RX packets:0 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:0\n          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)</p>\n<p>root@udooneo:~#</p>\n<pre><code>\n**NOTE:** The (wired) Ethernet cable was connected to my home network, so I can test Internet connection:\n</code></pre>\n<p>root@udooneo:~# ping -c 5 <a href=\"http://www.cisco.com\">www.cisco.com</a>\nPING <a href=\"http://www.cisco.com\">www.cisco.com</a> (95.100.224.170): 56 data bytes\n64 bytes from 95.100.224.170: seq=0 ttl=55 time=7.091 ms\n64 bytes from 95.100.224.170: seq=1 ttl=55 time=103.499 ms\n64 bytes from 95.100.224.170: seq=2 ttl=55 time=23.828 ms\n64 bytes from 95.100.224.170: seq=3 ttl=55 time=7.683 ms\n64 bytes from 95.100.224.170: seq=4 ttl=55 time=7.321 ms</p>\n<p>--- <a href=\"http://www.cisco.com\">www.cisco.com</a> ping statistics ---\n5 packets transmitted, 5 packets received, 0% packet loss\nround-trip min/avg/max = 7.091/29.884/103.499 ms\nroot@udooneo:~#</p>\n<pre><code>\n&lt;!-- markdown-link-check-enable --&gt;\n&lt;!-- EOF --&gt;\n</code></pre>\n"},"config":{"title":"gmacario.github.io","description":"Gianpaolo Macario's public rants","social":{"github":{"name":"gmacario","link":"https://github.com/gmacario"},"twitter":{"name":"gpmacario","link":"https://www.twitter.com/gpmacario"}}}},"__N_SSG":true}