{"pageProps":{"post":{"title":"Creating private forks of a GitHub repository","content":"<h2 id=\"problem-statement\">Problem statement</h2>\n<p>Sometimes it may be useful or needed to have a private repository on GitHub which is a fork (or just a mirror) of a public repository.</p>\n<p>The &quot;Fork&quot; button available on the GitHub web interface does not allow to change the visibility rule of the fork. That means that only public forks can be created from public repositories, and private forks for private repositories.\nFurthermore, forks created via the web interface on GitHub will be visibile to all the users who have access to either the upstream repository or its forks.</p>\n<p>This is supposed to be a features, but for some use cases this might be a limitation (let me say, some users are shy...).\nFor instances, this might be useful to work to a new feature in a private repository before making it available to the public.</p>\n<p>The procedure detailed in the following section is just a little bit more complex than pushing a button on a web page but solves the problem.</p>\n<p>The same procedure can also be applied to create a public fork to a private repository. This might be useful for instance for making only some branches (<code>main</code> or <code>release</code>) public, and keeping the development branch or some enterprise features restricted.</p>\n<h2 id=\"step-by-step-instructions\">Step-by-step instructions</h2>\n<p>Let us assume we want to do the following:</p>\n<ul>\n<li>Public upstream repository: <a href=\"https://github.com/ObelusFamily/Anythink-Market-kqkg9ci8\">https://github.com/ObelusFamily/Anythink-Market-kqkg9ci8</a></li>\n<li>Private fork to be created: <a href=\"https://github.com/gmacario/Anythink-Market-private\">https://github.com/gmacario/Anythink-Market-private</a></li>\n</ul>\n<h3 id=\"create-the-private-repository\">Create the private repository</h3>\n<p>Sign in to <a href=\"https://github.com/\">https://github.com/</a>,\nthen <a href=\"https://github.com/new\">create a new repository</a>:</p>\n<ul>\n<li>Repository template: No template</li>\n<li>Owner: <code>gmacario</code></li>\n<li>Repository name: <code>Anythink-Market-private</code></li>\n<li>Description (optional): <code>Private fork of https://github.com/ObelusFamily/Anythink-Market-kqkg9ci8</code></li>\n<li>Visibility: <strong>Private</strong> - You choose who can see and commit to this repository</li>\n<li>Initialize this repository with:<ul>\n<li><input disabled=\"\" type=\"checkbox\"> Add a README file</li>\n<li>Add .gitignore<ul>\n<li>.gitignore template: None</li>\n</ul>\n</li>\n<li>Choose a license:<ul>\n<li>License: None</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p>then click &quot;Create repository&quot;.</p>\n<h3 id=\"populate-the-private-repository\">Populate the private repository</h3>\n<p>Open a shell and type the following commands</p>\n<pre><code class=\"language-bash\">git clone https://github.com/ObelusFamily/Anythink-Market-kqkg9ci8\nmv Anythink-Market-kqkg9ci8 Anythink-Market-private\ncd Anythink-Market-private/\nls -la\ngit remote -v\ngit remote add upstream https://github.com/ObelusFamily/Anythink-Market-kqkg9ci8\ngit remote set-url origin https://github.com/gmacario/Anythink-Market-private.git\ngit branch -av\ngit fetch --all\ngit push -u --tags origin main\n</code></pre>\n<p>That&#39;s it!</p>\n<h3 id=\"add-features-to-the-private-fork\">Add features to the private fork</h3>\n<p>Now on you may work on <code>origin</code> (your private fork) as usual.</p>\n<pre><code class=\"language-bash\">git checkout -b feat/my-feature\n# Do something\ngit commit -m &quot;Blah blah blah&quot;\ngit push -u origin feat/my-feature\n</code></pre>\n<p>You may now create pull requests to your private fork, run GitHub Actions to build and test your changes, etc.</p>\n<h3 id=\"create-a-pull-request-to-upstream-repository\">Create a Pull Request to upstream repository</h3>\n<p>When you are ready to submit your changes upstream you just have to do the following:</p>\n<pre><code class=\"language-bash\">git checkout feat/my-feature\ngit push upstream feat/my-feature\n</code></pre>\n<p>then create your Pull Request to the upstream repository.</p>\n<!-- EOF -->\n"},"config":{"title":"gmacario.github.io","description":"Gianpaolo Macario's public rants","social":{"github":{"name":"gmacario","link":"https://github.com/gmacario"},"twitter":{"name":"gpmacario","link":"https://www.twitter.com/gpmacario"}}}},"__N_SSG":true}