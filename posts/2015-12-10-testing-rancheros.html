<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><meta name="description" content="Gianpaolo Macario&#x27;s public rants"/><title>Testing Rancher OS</title><meta name="next-head-count" content="4"/><link rel="preload" href="/_next/static/css/08fafe92abad983f984c.css" as="style"/><link rel="stylesheet" href="/_next/static/css/08fafe92abad983f984c.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.1a5e6c0bcaecf178eee2.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.a817edd9b2693fcc6af8.js" as="script"/><link rel="preload" href="/_next/static/chunks/main-daaff4f95c13923f49a5.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-041b1432faef8bf5f62a.js" as="script"/><link rel="preload" href="/_next/static/chunks/b38cc82cec06c0ea8b096def674947a423bb2764.260eb1ac110a53311620.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/posts/%5Bslug%5D-1c9a30b06d2f3be2ac9c.js" as="script"/></head><body><div id="__next"><main class="h-screen flex flex-col"><header class="py-3 fixed top-0 z-50 flex flex-wrap justify-between w-screen bg-white border-b border-gray-200"><div class="mx-3 py-2 px-4  font-bold text-indigo-500">Gianpaolo Macario&#x27;s blog</div><div class="justify-end"><a class="mr-6 py-2 px-4 inline-block rounded h-full text-indigo-500 hover:text-white hover:bg-indigo-500" href="/">Home</a><a class="mr-6 py-2 px-4 inline-block rounded h-full text-indigo-500 hover:text-white hover:bg-indigo-500" href="/posts">Posts</a></div></header><div class="pt-28 mx-auto w-5/6 break-words flex flex-grow prose prose-indigo hover:prose-black md:prose-lg lg:prose-xl"><article><h1>Testing Rancher OS</h1><div class="prose prose-indigo hover:prose-black md:prose-lg lg:prose-xl"><!-- markdown-link-check-disable -->

<h3 id="introduction">Introduction</h3>
<p>My first steps trying <a href="http://rancher.com/rancher-os/">RancherOS</a>.</p>
<h3 id="references">References</h3>
<ul>
<li><a href="https://medium.com/devs-foodit/pimp-my-jenkins-continuous-delivery-dashboard-edition-229463755730">https://medium.com/devs-foodit/pimp-my-jenkins-continuous-delivery-dashboard-edition-229463755730</a></li>
<li><a href="http://rancher.com/deploying-a-scalable-jenkins-cluster-with-docker-and-rancher/">http://rancher.com/deploying-a-scalable-jenkins-cluster-with-docker-and-rancher/</a></li>
<li><a href="http://thenewstack.io/now-in-beta-rancher-labs-runs-docker-natively-in-production/">http://thenewstack.io/now-in-beta-rancher-labs-runs-docker-natively-in-production/</a></li>
<li><a href="https://www.quora.com/What-are-the-differences-between-RancherOS-and-CoreOS">https://www.quora.com/What-are-the-differences-between-RancherOS-and-CoreOS</a></li>
<li><a href="https://github.com/rancher/os">https://github.com/rancher/os</a></li>
<li><a href="http://docs.rancher.com/os/quick-start-guide/">http://docs.rancher.com/os/quick-start-guide/</a></li>
</ul>
<h3 id="launching-rancheros-using-vagrant">Launching RancherOS using Vagrant</h3>
<p>(adapted from <a href="http://docs.rancher.com/os/quick-start-guide/">http://docs.rancher.com/os/quick-start-guide/</a>)</p>
<p>Logged in as gmacario@itm-gmacario-w7, start a Cygwin terminal</p>
<p>Clone the RancherOS Vagrant repository.</p>
<pre><code>$ mkdir -p ~/test &amp;&amp; cd ~/test
$ git clone https://github.com/rancher/os-vagrant.git
$ cd os-vagrant
</code></pre>
<p>Startup your VM with <code>vagrant up</code></p>
<pre><code>$ vagrant up
Bringing machine &#39;rancher-01&#39; up with &#39;virtualbox&#39; provider...
...
==&gt; rancher-01: Machine booted and ready!
==&gt; rancher-01: Setting hostname...
==&gt; rancher-01: Configuring and enabling network interfaces...
</code></pre>
<p>Log into your VM with <code>vagrant ssh</code></p>
<pre><code>$ vagrant ssh
[rancher@rancher-01 ~]$
</code></pre>
<h3 id="a-first-look-at-rancheros">A first look at RancherOS</h3>
<h4 id="check-kernel-version">Check kernel version</h4>
<pre><code>[rancher@rancher-01 ~]$ uname -a
Linux rancher-01 4.2.3-rancher #1 SMP Wed Oct 14 11:25:04 UTC 2015 x86_64 GNU/Linux
[rancher@rancher-01 ~]$
</code></pre>
<h4 id="inspect-disk-usage">Inspect disk usage</h4>
<pre><code>[rancher@rancher-01 ~]$ sudo df -h
Filesystem                Size      Used Available Use% Mounted on
overlay                  36.5G    231.4M     34.3G   1% /
tmpfs                   484.9M         0    484.9M   0% /dev
tmpfs                   498.3M         0    498.3M   0% /sys/fs/cgroup
none                    498.3M    252.0K    498.0M   0% /run
/dev/sda1                36.5G    231.4M     34.3G   1% /home
/dev/sda1                36.5G    231.4M     34.3G   1% /opt
/dev/sda1                36.5G    231.4M     34.3G   1% /etc/docker
/dev/sda1                36.5G    231.4M     34.3G   1% /lib/firmware
none                    498.3M    252.0K    498.0M   0% /var/run
/dev/sda1                36.5G    231.4M     34.3G   1% /sbin/reboot
/dev/sda1                36.5G    231.4M     34.3G   1% /var/log
devtmpfs                484.9M         0    484.9M   0% /host/dev
shm                      64.0M         0     64.0M   0% /host/dev/shm
/dev/sda1                36.5G    231.4M     34.3G   1% /sbin/shutdown
/dev/sda1                36.5G    231.4M     34.3G   1% /sbin/halt
/dev/sda1                36.5G    231.4M     34.3G   1% /sbin/iptables
/dev/sda1                36.5G    231.4M     34.3G   1% /sbin/poweroff
/dev/sda1                36.5G    231.4M     34.3G   1% /etc/rkt
/dev/sda1                36.5G    231.4M     34.3G   1% /lib/modules
/dev/sda1                36.5G    231.4M     34.3G   1% /usr/sbin/ros
/dev/sda1                36.5G    231.4M     34.3G   1% /usr/bin/system-docker
/dev/sda1                36.5G    231.4M     34.3G   1% /var/lib/docker
/dev/sda1                36.5G    231.4M     34.3G   1% /usr/bin/user-docker
/dev/sda1                36.5G    231.4M     34.3G   1% /var/lib/rkt
/dev/sda1                36.5G    231.4M     34.3G   1% /usr/sbin/wait-for-network
/dev/sda1                36.5G    231.4M     34.3G   1% /usr/bin/dockerlaunch
/dev/sda1                36.5G    231.4M     34.3G   1% /usr/bin/cloud-init
/dev/sda1                36.5G    231.4M     34.3G   1% /usr/bin/docker.dist
/dev/sda1                36.5G    231.4M     34.3G   1% /usr/sbin/rancherctl
/dev/sda1                36.5G    231.4M     34.3G   1% /usr/sbin/wait-for-docker
/dev/sda1                36.5G    231.4M     34.3G   1% /usr/bin/respawn
/dev/sda1                36.5G    231.4M     34.3G   1% /usr/sbin/netconf
/dev/sda1                36.5G    231.4M     34.3G   1% /var/lib/rancher
/dev/sda1                36.5G    231.4M     34.3G   1% /var/lib/rancher/conf
/dev/sda1                36.5G    231.4M     34.3G   1% /usr/share/ros/os-config.yml
/dev/sda1                36.5G    231.4M     34.3G   1% /etc/ssl/certs/ca-certificates.crt.rancher
/dev/sda1                36.5G    231.4M     34.3G   1% /etc/resolv.conf
/dev/sda1                36.5G    231.4M     34.3G   1% /etc/hostname
shm                      64.0M         0     64.0M   0% /dev/shm
devtmpfs                484.9M         0    484.9M   0% /dev
shm                      64.0M         0     64.0M   0% /dev/shm
[rancher@rancher-01 ~]$
</code></pre>
<h4 id="check-network-interfaces">Check network interfaces</h4>
<pre><code>[root@rancher-01 ~]$ ifconfig
docker-sys Link encap:Ethernet  HWaddr 00:00:00:00:00:00
          inet addr:172.18.42.1  Bcast:0.0.0.0  Mask:255.255.0.0
          inet6 addr: fe80::c4e4:8ff:fe67:ae2d/64 Scope:Link
          UP BROADCAST MULTICAST  MTU:1500  Metric:1
          RX packets:5 errors:0 dropped:0 overruns:0 frame:0
          TX packets:8 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:368 (368.0 B)  TX bytes:648 (648.0 B)

docker0   Link encap:Ethernet  HWaddr 02:42:46:53:C8:82
          inet addr:172.17.0.1  Bcast:0.0.0.0  Mask:255.255.0.0
          inet6 addr: fe80::42:46ff:fe53:c882/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:59 errors:0 dropped:0 overruns:0 frame:0
          TX packets:54 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:4003 (3.9 KiB)  TX bytes:4563 (4.4 KiB)

eth0      Link encap:Ethernet  HWaddr 08:00:27:9F:1D:71
          inet addr:10.0.2.15  Bcast:10.0.2.255  Mask:255.255.255.0
          inet6 addr: fe80::a00:27ff:fe9f:1d71/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:104139 errors:0 dropped:0 overruns:0 frame:0
          TX packets:55480 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:75924932 (72.4 MiB)  TX bytes:3401703 (3.2 MiB)

eth1      Link encap:Ethernet  HWaddr 08:00:27:19:16:E4
          inet addr:172.19.8.101  Bcast:0.0.0.0  Mask:255.255.255.0
          inet6 addr: fe80::a00:27ff:fe19:16e4/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:7181 errors:0 dropped:4 overruns:0 frame:0
          TX packets:29 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:755660 (737.9 KiB)  TX bytes:3362 (3.2 KiB)

lo        Link encap:Local Loopback
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:65536  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)

veth0196292 Link encap:Ethernet  HWaddr FE:49:55:09:12:AA
          inet6 addr: fe80::fc49:55ff:fe09:12aa/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:13 errors:0 dropped:0 overruns:0 frame:0
          TX packets:30 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:822 (822.0 B)  TX bytes:1944 (1.8 KiB)

[root@rancher-01 ~]$
</code></pre>
<h4 id="check-docker-version">Check Docker version</h4>
<pre><code>[rancher@rancher-01 ~]$ docker version
Client:
 Version:      1.9.1-rc1
 API version:  1.21
 Go version:   go1.4.3
 Git commit:   4663423
 Built:        Mon Nov 16 06:05:31 UTC 2015
 OS/Arch:      linux/amd64

Server:
 Version:      1.9.1-rc1
 API version:  1.21
 Go version:   go1.4.3
 Git commit:   4663423
 Built:        Mon Nov 16 06:05:31 UTC 2015
 OS/Arch:      linux/amd64
[rancher@rancher-01 ~]$
</code></pre>
<h4 id="inspect-running-system-containers">Inspect running system containers</h4>
<p>Notice that <code>system-docker ps</code> fails unless it is run as <code>root</code>.</p>
<pre><code>[rancher@rancher-01 ~]$ sudo -i
[root@rancher-01 ~]# system-docker ps
CONTAINER ID        IMAGE                       COMMAND                  CREATED             STATUS              PORTS               NAMES
692016a11484        rancher/os-docker:v0.4.1    &quot;/usr/sbin/entry.sh /&quot;   2 hours ago         Up 2 hours                              docker
ebe39a8deb65        rancher/os-console:v0.4.1   &quot;/usr/sbin/entry.sh /&quot;   2 hours ago         Up 2 hours                              os_console_1
ec28508ac472        rancher/os-ntp:v0.4.1       &quot;/usr/sbin/entry.sh /&quot;   2 hours ago         Up 2 hours                              ntp
503dd1a3f135        rancher/os-network:v0.4.1   &quot;/usr/sbin/entry.sh n&quot;   2 hours ago         Up 2 hours                              network
ccf03fbf1693        rancher/os-udev:v0.4.1      &quot;/usr/sbin/entry.sh /&quot;   2 hours ago         Up 2 hours                              udev
f6f621151318        rancher/os-acpid:v0.4.1     &quot;/usr/sbin/entry.sh /&quot;   2 hours ago         Up 2 hours                              acpid
24a59d843f13        rancher/os-syslog:v0.4.1    &quot;/usr/sbin/entry.sh /&quot;   2 hours ago         Up 2 hours                              syslog
[root@rancher-01 ~]# exit
logout
[rancher@rancher-01 ~]$
</code></pre>
<h4 id="run-ubuntu-inside-a-container">Run Ubuntu inside a container</h4>
<pre><code>[rancher@rancher-01 ~]$ docker run -it ubuntu
root@f2180b351d1b:/# lsb_release -a
No LSB modules are available.
Distributor ID: Ubuntu
Description:    Ubuntu 14.04.3 LTS
Release:        14.04
Codename:       trusty
root@f2180b351d1b:/#
</code></pre>
<h4 id="run-nginx-inside-a-container">Run nginx inside a container</h4>
<pre><code>[rancher@rancher-01 ~]$ ifconfig eth1 | grep &quot;inet addr&quot;
          inet addr:172.19.8.101  Bcast:0.0.0.0  Mask:255.255.255.0
[rancher@rancher-01 ~]$ docker run -d --name nginx -p 8000:80 husseingalal/nginxbusy
8331240ea5fdf078822dc3f79380627e6137d2a5d7d1c75fad567da12419b850
[rancher@rancher-01 ~]$
</code></pre>
<p>Now logged as gmacario@itm-gmacario-w7, browse <a href="http://172.19.8.101:8000/">http://172.19.8.101:8000/</a></p>
<h4 id="deploy-a-system-service-container">Deploy a system service container</h4>
<pre><code>[rancher@rancher-01 ~]$ sudo system-docker run -d --net=host --name busydash husseingalal/busydash
b6fb4f1983399f285c1e29f0133b454837d2d9d2f461f3328b3467233573195f
[rancher@rancher-01 ~]$
</code></pre>
<p>logged as gmacario@itm-gmacario-w7, browse <a href="http://172.19.8.101/">http://172.19.8.101/</a></p>
<p><strong>NOTE 1</strong>: Docker image <code>husseingalal/busydash</code> was built from the following <code>Dockerfile</code>:</p>
<pre><code>FROM hwestphal/nodebox
MAINTAINER hussein.galal.ahmed.11@gmail.com

RUN opkg-install unzip
RUN curl -k -L -o master.zip https://github.com/afaqurk/linux-dash/archive/master.zip
RUN unzip master.zip
WORKDIR linux-dash-master
RUN npm install

ENTRYPOINT [&quot;node&quot;,&quot;server&quot;]
</code></pre>
<p><strong>NOTE 2</strong>: Sources for Docker image <code>hwestphal/nodebox</code> are available at <a href="https://github.com/hwestphal/docker-nodebox">https://github.com/hwestphal/docker-nodebox</a></p>
<p>That&#39;s all for today... Stay tuned for future posts about RancherOS!</p>
<!-- markdown-link-check-enable -->
<!-- EOF -->
</div></article></div><footer class="h-auto mt-20 bg-gray-100 justify-between border-t border-gray-200"><div class="pt-6 mx-auto  gap-x-6 w-9/12 flex flex-col prose prose-indigo hover:prose-black md:prose-lg lg:prose-xl"><div class="prose-xl"><p class="">gmacario.github.io</p></div><div class="flex flex-col sm:flex-row flex-wrap justify-between md:justify-start"><p class="mr-12 text-gray-600 prose-sm">gmacario.github.io</p><div class="mr-12 flex flex-col justify-start"><p class="text-gray-600 prose-sm flex flex-row"><svg class="MuiSvgIcon-root mr-2" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 .3a12 12 0 0 0-3.8 23.4c.6.1.8-.3.8-.6v-2c-3.3.7-4-1.6-4-1.6-.6-1.4-1.4-1.8-1.4-1.8-1-.7.1-.7.1-.7 1.2 0 1.9 1.2 1.9 1.2 1 1.8 2.8 1.3 3.5 1 0-.8.4-1.3.7-1.6-2.7-.3-5.5-1.3-5.5-6 0-1.2.5-2.3 1.3-3.1-.2-.4-.6-1.6 0-3.2 0 0 1-.3 3.4 1.2a11.5 11.5 0 0 1 6 0c2.3-1.5 3.3-1.2 3.3-1.2.6 1.6.2 2.8 0 3.2.9.8 1.3 1.9 1.3 3.2 0 4.6-2.8 5.6-5.5 5.9.5.4.9 1 .9 2.2v3.3c0 .3.1.7.8.6A12 12 0 0 0 12 .3"></path></svg><a href="https://github.com/gmacario">gmacario</a></p><p class="text-gray-600 prose-sm flex flex-row"><svg class="MuiSvgIcon-root mr-2" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"></path></svg><a href="https://www.twitter.com/gpmacario">gpmacario</a></p></div><p class="mr-12 text-gray-600 prose-sm">Gianpaolo Macario&#x27;s public rants</p></div></div></footer></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Testing Rancher OS","content":"\u003c!-- markdown-link-check-disable --\u003e\n\n\u003ch3 id=\"introduction\"\u003eIntroduction\u003c/h3\u003e\n\u003cp\u003eMy first steps trying \u003ca href=\"http://rancher.com/rancher-os/\"\u003eRancherOS\u003c/a\u003e.\u003c/p\u003e\n\u003ch3 id=\"references\"\u003eReferences\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://medium.com/devs-foodit/pimp-my-jenkins-continuous-delivery-dashboard-edition-229463755730\"\u003ehttps://medium.com/devs-foodit/pimp-my-jenkins-continuous-delivery-dashboard-edition-229463755730\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"http://rancher.com/deploying-a-scalable-jenkins-cluster-with-docker-and-rancher/\"\u003ehttp://rancher.com/deploying-a-scalable-jenkins-cluster-with-docker-and-rancher/\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"http://thenewstack.io/now-in-beta-rancher-labs-runs-docker-natively-in-production/\"\u003ehttp://thenewstack.io/now-in-beta-rancher-labs-runs-docker-natively-in-production/\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://www.quora.com/What-are-the-differences-between-RancherOS-and-CoreOS\"\u003ehttps://www.quora.com/What-are-the-differences-between-RancherOS-and-CoreOS\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/rancher/os\"\u003ehttps://github.com/rancher/os\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"http://docs.rancher.com/os/quick-start-guide/\"\u003ehttp://docs.rancher.com/os/quick-start-guide/\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"launching-rancheros-using-vagrant\"\u003eLaunching RancherOS using Vagrant\u003c/h3\u003e\n\u003cp\u003e(adapted from \u003ca href=\"http://docs.rancher.com/os/quick-start-guide/\"\u003ehttp://docs.rancher.com/os/quick-start-guide/\u003c/a\u003e)\u003c/p\u003e\n\u003cp\u003eLogged in as gmacario@itm-gmacario-w7, start a Cygwin terminal\u003c/p\u003e\n\u003cp\u003eClone the RancherOS Vagrant repository.\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e$ mkdir -p ~/test \u0026amp;\u0026amp; cd ~/test\n$ git clone https://github.com/rancher/os-vagrant.git\n$ cd os-vagrant\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eStartup your VM with \u003ccode\u003evagrant up\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e$ vagrant up\nBringing machine \u0026#39;rancher-01\u0026#39; up with \u0026#39;virtualbox\u0026#39; provider...\n...\n==\u0026gt; rancher-01: Machine booted and ready!\n==\u0026gt; rancher-01: Setting hostname...\n==\u0026gt; rancher-01: Configuring and enabling network interfaces...\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eLog into your VM with \u003ccode\u003evagrant ssh\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e$ vagrant ssh\n[rancher@rancher-01 ~]$\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"a-first-look-at-rancheros\"\u003eA first look at RancherOS\u003c/h3\u003e\n\u003ch4 id=\"check-kernel-version\"\u003eCheck kernel version\u003c/h4\u003e\n\u003cpre\u003e\u003ccode\u003e[rancher@rancher-01 ~]$ uname -a\nLinux rancher-01 4.2.3-rancher #1 SMP Wed Oct 14 11:25:04 UTC 2015 x86_64 GNU/Linux\n[rancher@rancher-01 ~]$\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch4 id=\"inspect-disk-usage\"\u003eInspect disk usage\u003c/h4\u003e\n\u003cpre\u003e\u003ccode\u003e[rancher@rancher-01 ~]$ sudo df -h\nFilesystem                Size      Used Available Use% Mounted on\noverlay                  36.5G    231.4M     34.3G   1% /\ntmpfs                   484.9M         0    484.9M   0% /dev\ntmpfs                   498.3M         0    498.3M   0% /sys/fs/cgroup\nnone                    498.3M    252.0K    498.0M   0% /run\n/dev/sda1                36.5G    231.4M     34.3G   1% /home\n/dev/sda1                36.5G    231.4M     34.3G   1% /opt\n/dev/sda1                36.5G    231.4M     34.3G   1% /etc/docker\n/dev/sda1                36.5G    231.4M     34.3G   1% /lib/firmware\nnone                    498.3M    252.0K    498.0M   0% /var/run\n/dev/sda1                36.5G    231.4M     34.3G   1% /sbin/reboot\n/dev/sda1                36.5G    231.4M     34.3G   1% /var/log\ndevtmpfs                484.9M         0    484.9M   0% /host/dev\nshm                      64.0M         0     64.0M   0% /host/dev/shm\n/dev/sda1                36.5G    231.4M     34.3G   1% /sbin/shutdown\n/dev/sda1                36.5G    231.4M     34.3G   1% /sbin/halt\n/dev/sda1                36.5G    231.4M     34.3G   1% /sbin/iptables\n/dev/sda1                36.5G    231.4M     34.3G   1% /sbin/poweroff\n/dev/sda1                36.5G    231.4M     34.3G   1% /etc/rkt\n/dev/sda1                36.5G    231.4M     34.3G   1% /lib/modules\n/dev/sda1                36.5G    231.4M     34.3G   1% /usr/sbin/ros\n/dev/sda1                36.5G    231.4M     34.3G   1% /usr/bin/system-docker\n/dev/sda1                36.5G    231.4M     34.3G   1% /var/lib/docker\n/dev/sda1                36.5G    231.4M     34.3G   1% /usr/bin/user-docker\n/dev/sda1                36.5G    231.4M     34.3G   1% /var/lib/rkt\n/dev/sda1                36.5G    231.4M     34.3G   1% /usr/sbin/wait-for-network\n/dev/sda1                36.5G    231.4M     34.3G   1% /usr/bin/dockerlaunch\n/dev/sda1                36.5G    231.4M     34.3G   1% /usr/bin/cloud-init\n/dev/sda1                36.5G    231.4M     34.3G   1% /usr/bin/docker.dist\n/dev/sda1                36.5G    231.4M     34.3G   1% /usr/sbin/rancherctl\n/dev/sda1                36.5G    231.4M     34.3G   1% /usr/sbin/wait-for-docker\n/dev/sda1                36.5G    231.4M     34.3G   1% /usr/bin/respawn\n/dev/sda1                36.5G    231.4M     34.3G   1% /usr/sbin/netconf\n/dev/sda1                36.5G    231.4M     34.3G   1% /var/lib/rancher\n/dev/sda1                36.5G    231.4M     34.3G   1% /var/lib/rancher/conf\n/dev/sda1                36.5G    231.4M     34.3G   1% /usr/share/ros/os-config.yml\n/dev/sda1                36.5G    231.4M     34.3G   1% /etc/ssl/certs/ca-certificates.crt.rancher\n/dev/sda1                36.5G    231.4M     34.3G   1% /etc/resolv.conf\n/dev/sda1                36.5G    231.4M     34.3G   1% /etc/hostname\nshm                      64.0M         0     64.0M   0% /dev/shm\ndevtmpfs                484.9M         0    484.9M   0% /dev\nshm                      64.0M         0     64.0M   0% /dev/shm\n[rancher@rancher-01 ~]$\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch4 id=\"check-network-interfaces\"\u003eCheck network interfaces\u003c/h4\u003e\n\u003cpre\u003e\u003ccode\u003e[root@rancher-01 ~]$ ifconfig\ndocker-sys Link encap:Ethernet  HWaddr 00:00:00:00:00:00\n          inet addr:172.18.42.1  Bcast:0.0.0.0  Mask:255.255.0.0\n          inet6 addr: fe80::c4e4:8ff:fe67:ae2d/64 Scope:Link\n          UP BROADCAST MULTICAST  MTU:1500  Metric:1\n          RX packets:5 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:8 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:0\n          RX bytes:368 (368.0 B)  TX bytes:648 (648.0 B)\n\ndocker0   Link encap:Ethernet  HWaddr 02:42:46:53:C8:82\n          inet addr:172.17.0.1  Bcast:0.0.0.0  Mask:255.255.0.0\n          inet6 addr: fe80::42:46ff:fe53:c882/64 Scope:Link\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n          RX packets:59 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:54 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:0\n          RX bytes:4003 (3.9 KiB)  TX bytes:4563 (4.4 KiB)\n\neth0      Link encap:Ethernet  HWaddr 08:00:27:9F:1D:71\n          inet addr:10.0.2.15  Bcast:10.0.2.255  Mask:255.255.255.0\n          inet6 addr: fe80::a00:27ff:fe9f:1d71/64 Scope:Link\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n          RX packets:104139 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:55480 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:1000\n          RX bytes:75924932 (72.4 MiB)  TX bytes:3401703 (3.2 MiB)\n\neth1      Link encap:Ethernet  HWaddr 08:00:27:19:16:E4\n          inet addr:172.19.8.101  Bcast:0.0.0.0  Mask:255.255.255.0\n          inet6 addr: fe80::a00:27ff:fe19:16e4/64 Scope:Link\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n          RX packets:7181 errors:0 dropped:4 overruns:0 frame:0\n          TX packets:29 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:1000\n          RX bytes:755660 (737.9 KiB)  TX bytes:3362 (3.2 KiB)\n\nlo        Link encap:Local Loopback\n          inet addr:127.0.0.1  Mask:255.0.0.0\n          inet6 addr: ::1/128 Scope:Host\n          UP LOOPBACK RUNNING  MTU:65536  Metric:1\n          RX packets:0 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:0\n          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)\n\nveth0196292 Link encap:Ethernet  HWaddr FE:49:55:09:12:AA\n          inet6 addr: fe80::fc49:55ff:fe09:12aa/64 Scope:Link\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n          RX packets:13 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:30 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:0\n          RX bytes:822 (822.0 B)  TX bytes:1944 (1.8 KiB)\n\n[root@rancher-01 ~]$\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch4 id=\"check-docker-version\"\u003eCheck Docker version\u003c/h4\u003e\n\u003cpre\u003e\u003ccode\u003e[rancher@rancher-01 ~]$ docker version\nClient:\n Version:      1.9.1-rc1\n API version:  1.21\n Go version:   go1.4.3\n Git commit:   4663423\n Built:        Mon Nov 16 06:05:31 UTC 2015\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.9.1-rc1\n API version:  1.21\n Go version:   go1.4.3\n Git commit:   4663423\n Built:        Mon Nov 16 06:05:31 UTC 2015\n OS/Arch:      linux/amd64\n[rancher@rancher-01 ~]$\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch4 id=\"inspect-running-system-containers\"\u003eInspect running system containers\u003c/h4\u003e\n\u003cp\u003eNotice that \u003ccode\u003esystem-docker ps\u003c/code\u003e fails unless it is run as \u003ccode\u003eroot\u003c/code\u003e.\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e[rancher@rancher-01 ~]$ sudo -i\n[root@rancher-01 ~]# system-docker ps\nCONTAINER ID        IMAGE                       COMMAND                  CREATED             STATUS              PORTS               NAMES\n692016a11484        rancher/os-docker:v0.4.1    \u0026quot;/usr/sbin/entry.sh /\u0026quot;   2 hours ago         Up 2 hours                              docker\nebe39a8deb65        rancher/os-console:v0.4.1   \u0026quot;/usr/sbin/entry.sh /\u0026quot;   2 hours ago         Up 2 hours                              os_console_1\nec28508ac472        rancher/os-ntp:v0.4.1       \u0026quot;/usr/sbin/entry.sh /\u0026quot;   2 hours ago         Up 2 hours                              ntp\n503dd1a3f135        rancher/os-network:v0.4.1   \u0026quot;/usr/sbin/entry.sh n\u0026quot;   2 hours ago         Up 2 hours                              network\nccf03fbf1693        rancher/os-udev:v0.4.1      \u0026quot;/usr/sbin/entry.sh /\u0026quot;   2 hours ago         Up 2 hours                              udev\nf6f621151318        rancher/os-acpid:v0.4.1     \u0026quot;/usr/sbin/entry.sh /\u0026quot;   2 hours ago         Up 2 hours                              acpid\n24a59d843f13        rancher/os-syslog:v0.4.1    \u0026quot;/usr/sbin/entry.sh /\u0026quot;   2 hours ago         Up 2 hours                              syslog\n[root@rancher-01 ~]# exit\nlogout\n[rancher@rancher-01 ~]$\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch4 id=\"run-ubuntu-inside-a-container\"\u003eRun Ubuntu inside a container\u003c/h4\u003e\n\u003cpre\u003e\u003ccode\u003e[rancher@rancher-01 ~]$ docker run -it ubuntu\nroot@f2180b351d1b:/# lsb_release -a\nNo LSB modules are available.\nDistributor ID: Ubuntu\nDescription:    Ubuntu 14.04.3 LTS\nRelease:        14.04\nCodename:       trusty\nroot@f2180b351d1b:/#\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch4 id=\"run-nginx-inside-a-container\"\u003eRun nginx inside a container\u003c/h4\u003e\n\u003cpre\u003e\u003ccode\u003e[rancher@rancher-01 ~]$ ifconfig eth1 | grep \u0026quot;inet addr\u0026quot;\n          inet addr:172.19.8.101  Bcast:0.0.0.0  Mask:255.255.255.0\n[rancher@rancher-01 ~]$ docker run -d --name nginx -p 8000:80 husseingalal/nginxbusy\n8331240ea5fdf078822dc3f79380627e6137d2a5d7d1c75fad567da12419b850\n[rancher@rancher-01 ~]$\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNow logged as gmacario@itm-gmacario-w7, browse \u003ca href=\"http://172.19.8.101:8000/\"\u003ehttp://172.19.8.101:8000/\u003c/a\u003e\u003c/p\u003e\n\u003ch4 id=\"deploy-a-system-service-container\"\u003eDeploy a system service container\u003c/h4\u003e\n\u003cpre\u003e\u003ccode\u003e[rancher@rancher-01 ~]$ sudo system-docker run -d --net=host --name busydash husseingalal/busydash\nb6fb4f1983399f285c1e29f0133b454837d2d9d2f461f3328b3467233573195f\n[rancher@rancher-01 ~]$\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003elogged as gmacario@itm-gmacario-w7, browse \u003ca href=\"http://172.19.8.101/\"\u003ehttp://172.19.8.101/\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eNOTE 1\u003c/strong\u003e: Docker image \u003ccode\u003ehusseingalal/busydash\u003c/code\u003e was built from the following \u003ccode\u003eDockerfile\u003c/code\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eFROM hwestphal/nodebox\nMAINTAINER hussein.galal.ahmed.11@gmail.com\n\nRUN opkg-install unzip\nRUN curl -k -L -o master.zip https://github.com/afaqurk/linux-dash/archive/master.zip\nRUN unzip master.zip\nWORKDIR linux-dash-master\nRUN npm install\n\nENTRYPOINT [\u0026quot;node\u0026quot;,\u0026quot;server\u0026quot;]\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eNOTE 2\u003c/strong\u003e: Sources for Docker image \u003ccode\u003ehwestphal/nodebox\u003c/code\u003e are available at \u003ca href=\"https://github.com/hwestphal/docker-nodebox\"\u003ehttps://github.com/hwestphal/docker-nodebox\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eThat\u0026#39;s all for today... Stay tuned for future posts about RancherOS!\u003c/p\u003e\n\u003c!-- markdown-link-check-enable --\u003e\n\u003c!-- EOF --\u003e\n"},"config":{"title":"gmacario.github.io","description":"Gianpaolo Macario's public rants","social":{"github":{"name":"gmacario","link":"https://github.com/gmacario"},"twitter":{"name":"gpmacario","link":"https://www.twitter.com/gpmacario"}}}},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"2015-12-10-testing-rancheros"},"buildId":"ASJNd_6Vg2choDquNL35J","runtimeConfig":{},"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-144e5fa6fafab6397d9c.js"></script><script src="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" async=""></script><script src="/_next/static/chunks/framework.1a5e6c0bcaecf178eee2.js" async=""></script><script src="/_next/static/chunks/commons.a817edd9b2693fcc6af8.js" async=""></script><script src="/_next/static/chunks/main-daaff4f95c13923f49a5.js" async=""></script><script src="/_next/static/chunks/pages/_app-041b1432faef8bf5f62a.js" async=""></script><script src="/_next/static/chunks/b38cc82cec06c0ea8b096def674947a423bb2764.260eb1ac110a53311620.js" async=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-1c9a30b06d2f3be2ac9c.js" async=""></script><script src="/_next/static/ASJNd_6Vg2choDquNL35J/_buildManifest.js" async=""></script><script src="/_next/static/ASJNd_6Vg2choDquNL35J/_ssgManifest.js" async=""></script></body></html>