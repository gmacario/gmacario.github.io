<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><meta name="description" content="Gianpaolo Macario&#x27;s public rants"/><title>Creating private forks of a GitHub repository</title><meta name="next-head-count" content="4"/><link rel="preload" href="/_next/static/css/08fafe92abad983f984c.css" as="style"/><link rel="stylesheet" href="/_next/static/css/08fafe92abad983f984c.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.1a5e6c0bcaecf178eee2.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.a817edd9b2693fcc6af8.js" as="script"/><link rel="preload" href="/_next/static/chunks/main-daaff4f95c13923f49a5.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-041b1432faef8bf5f62a.js" as="script"/><link rel="preload" href="/_next/static/chunks/b38cc82cec06c0ea8b096def674947a423bb2764.260eb1ac110a53311620.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/posts/%5Bslug%5D-1c9a30b06d2f3be2ac9c.js" as="script"/></head><body><div id="__next"><main class="h-screen flex flex-col"><header class="py-3 fixed top-0 z-50 flex flex-wrap justify-between w-screen bg-white border-b border-gray-200"><div class="mx-3 py-2 px-4  font-bold text-indigo-500">Gianpaolo Macario&#x27;s blog</div><div class="justify-end"><a class="mr-6 py-2 px-4 inline-block rounded h-full text-indigo-500 hover:text-white hover:bg-indigo-500" href="/">Home</a><a class="mr-6 py-2 px-4 inline-block rounded h-full text-indigo-500 hover:text-white hover:bg-indigo-500" href="/posts">Posts</a></div></header><div class="pt-28 mx-auto w-5/6 break-words flex flex-grow prose prose-indigo hover:prose-black md:prose-lg lg:prose-xl"><article><h1>Creating private forks of a GitHub repository</h1><div class="prose prose-indigo hover:prose-black md:prose-lg lg:prose-xl"><h2 id="problem-statement">Problem statement</h2>
<p>Sometimes it may be useful or needed to have a private repository on GitHub which is a fork (or just a mirror) of a public repository.</p>
<p>The &quot;Fork&quot; button available on the GitHub web interface does not allow to change the visibility rule of the fork. That means that only public forks can be created from public repositories, and private forks for private repositories.
Furthermore, forks created via the web interface on GitHub will be visibile to all the users who have access to either the upstream repository or its forks.</p>
<p>This is supposed to be a features, but for some use cases this might be a limitation (let me say, some users are shy...).
For instances, this might be useful to work to a new feature in a private repository before making it available to the public.</p>
<p>The procedure detailed in the following section is just a little bit more complex than pushing a button on a web page but solves the problem.</p>
<p>The same procedure can also be applied to create a public fork to a private repository. This might be useful for instance for making only some branches (<code>main</code> or <code>release</code>) public, and keeping the development branch or some enterprise features restricted.</p>
<h2 id="step-by-step-instructions">Step-by-step instructions</h2>
<p>Let us assume we want to do the following:</p>
<ul>
<li>Public upstream repository: <a href="https://github.com/ObelusFamily/Anythink-Market-kqkg9ci8">https://github.com/ObelusFamily/Anythink-Market-kqkg9ci8</a></li>
<li>Private fork to be created: <a href="https://github.com/gmacario/Anythink-Market-private">https://github.com/gmacario/Anythink-Market-private</a></li>
</ul>
<h3 id="create-the-private-repository">Create the private repository</h3>
<p>Sign in to <a href="https://github.com/">https://github.com/</a>,
then <a href="https://github.com/new">create a new repository</a>:</p>
<ul>
<li>Repository template: No template</li>
<li>Owner: <code>gmacario</code></li>
<li>Repository name: <code>Anythink-Market-private</code></li>
<li>Description (optional): <code>Private fork of https://github.com/ObelusFamily/Anythink-Market-kqkg9ci8</code></li>
<li>Visibility: <strong>Private</strong> - You choose who can see and commit to this repository</li>
<li>Initialize this repository with:<ul>
<li><input disabled="" type="checkbox"> Add a README file</li>
<li>Add .gitignore<ul>
<li>.gitignore template: None</li>
</ul>
</li>
<li>Choose a license:<ul>
<li>License: None</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>then click &quot;Create repository&quot;.</p>
<h3 id="populate-the-private-repository">Populate the private repository</h3>
<p>Open a shell and type the following commands</p>
<pre><code class="language-bash">git clone https://github.com/ObelusFamily/Anythink-Market-kqkg9ci8
mv Anythink-Market-kqkg9ci8 Anythink-Market-private
cd Anythink-Market-private/
ls -la
git remote -v
git remote add upstream https://github.com/ObelusFamily/Anythink-Market-kqkg9ci8
git remote set-url origin https://github.com/gmacario/Anythink-Market-private.git
git branch -av
git fetch --all
git push -u --tags origin main
</code></pre>
<p>That&#39;s it!</p>
<h3 id="add-features-to-the-private-fork">Add features to the private fork</h3>
<p>Now on you may work on <code>origin</code> (your private fork) as usual.</p>
<pre><code class="language-bash">git checkout -b feat/my-feature
# Do something
git commit -m &quot;Blah blah blah&quot;
git push -u origin feat/my-feature
</code></pre>
<p>You may now create pull requests to your private fork, run GitHub Actions to build and test your changes, etc.</p>
<h3 id="create-a-pull-request-to-upstream-repository">Create a Pull Request to upstream repository</h3>
<p>When you are ready to submit your changes upstream you just have to do the following:</p>
<pre><code class="language-bash">git checkout feat/my-feature
git push upstream feat/my-feature
</code></pre>
<p>then create your Pull Request to the upstream repository.</p>
<!-- EOF -->
</div></article></div><footer class="h-auto mt-20 bg-gray-100 justify-between border-t border-gray-200"><div class="pt-6 mx-auto  gap-x-6 w-9/12 flex flex-col prose prose-indigo hover:prose-black md:prose-lg lg:prose-xl"><div class="prose-xl"><p class="">gmacario.github.io</p></div><div class="flex flex-col sm:flex-row flex-wrap justify-between md:justify-start"><p class="mr-12 text-gray-600 prose-sm">gmacario.github.io</p><div class="mr-12 flex flex-col justify-start"><p class="text-gray-600 prose-sm flex flex-row"><svg class="MuiSvgIcon-root mr-2" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 .3a12 12 0 0 0-3.8 23.4c.6.1.8-.3.8-.6v-2c-3.3.7-4-1.6-4-1.6-.6-1.4-1.4-1.8-1.4-1.8-1-.7.1-.7.1-.7 1.2 0 1.9 1.2 1.9 1.2 1 1.8 2.8 1.3 3.5 1 0-.8.4-1.3.7-1.6-2.7-.3-5.5-1.3-5.5-6 0-1.2.5-2.3 1.3-3.1-.2-.4-.6-1.6 0-3.2 0 0 1-.3 3.4 1.2a11.5 11.5 0 0 1 6 0c2.3-1.5 3.3-1.2 3.3-1.2.6 1.6.2 2.8 0 3.2.9.8 1.3 1.9 1.3 3.2 0 4.6-2.8 5.6-5.5 5.9.5.4.9 1 .9 2.2v3.3c0 .3.1.7.8.6A12 12 0 0 0 12 .3"></path></svg><a href="https://github.com/gmacario">gmacario</a></p><p class="text-gray-600 prose-sm flex flex-row"><svg class="MuiSvgIcon-root mr-2" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"></path></svg><a href="https://www.twitter.com/gpmacario">gpmacario</a></p></div><p class="mr-12 text-gray-600 prose-sm">Gianpaolo Macario&#x27;s public rants</p></div></div></footer></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Creating private forks of a GitHub repository","content":"\u003ch2 id=\"problem-statement\"\u003eProblem statement\u003c/h2\u003e\n\u003cp\u003eSometimes it may be useful or needed to have a private repository on GitHub which is a fork (or just a mirror) of a public repository.\u003c/p\u003e\n\u003cp\u003eThe \u0026quot;Fork\u0026quot; button available on the GitHub web interface does not allow to change the visibility rule of the fork. That means that only public forks can be created from public repositories, and private forks for private repositories.\nFurthermore, forks created via the web interface on GitHub will be visibile to all the users who have access to either the upstream repository or its forks.\u003c/p\u003e\n\u003cp\u003eThis is supposed to be a features, but for some use cases this might be a limitation (let me say, some users are shy...).\nFor instances, this might be useful to work to a new feature in a private repository before making it available to the public.\u003c/p\u003e\n\u003cp\u003eThe procedure detailed in the following section is just a little bit more complex than pushing a button on a web page but solves the problem.\u003c/p\u003e\n\u003cp\u003eThe same procedure can also be applied to create a public fork to a private repository. This might be useful for instance for making only some branches (\u003ccode\u003emain\u003c/code\u003e or \u003ccode\u003erelease\u003c/code\u003e) public, and keeping the development branch or some enterprise features restricted.\u003c/p\u003e\n\u003ch2 id=\"step-by-step-instructions\"\u003eStep-by-step instructions\u003c/h2\u003e\n\u003cp\u003eLet us assume we want to do the following:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ePublic upstream repository: \u003ca href=\"https://github.com/ObelusFamily/Anythink-Market-kqkg9ci8\"\u003ehttps://github.com/ObelusFamily/Anythink-Market-kqkg9ci8\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003ePrivate fork to be created: \u003ca href=\"https://github.com/gmacario/Anythink-Market-private\"\u003ehttps://github.com/gmacario/Anythink-Market-private\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"create-the-private-repository\"\u003eCreate the private repository\u003c/h3\u003e\n\u003cp\u003eSign in to \u003ca href=\"https://github.com/\"\u003ehttps://github.com/\u003c/a\u003e,\nthen \u003ca href=\"https://github.com/new\"\u003ecreate a new repository\u003c/a\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eRepository template: No template\u003c/li\u003e\n\u003cli\u003eOwner: \u003ccode\u003egmacario\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eRepository name: \u003ccode\u003eAnythink-Market-private\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eDescription (optional): \u003ccode\u003ePrivate fork of https://github.com/ObelusFamily/Anythink-Market-kqkg9ci8\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eVisibility: \u003cstrong\u003ePrivate\u003c/strong\u003e - You choose who can see and commit to this repository\u003c/li\u003e\n\u003cli\u003eInitialize this repository with:\u003cul\u003e\n\u003cli\u003e\u003cinput disabled=\"\" type=\"checkbox\"\u003e Add a README file\u003c/li\u003e\n\u003cli\u003eAdd .gitignore\u003cul\u003e\n\u003cli\u003e.gitignore template: None\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eChoose a license:\u003cul\u003e\n\u003cli\u003eLicense: None\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003ethen click \u0026quot;Create repository\u0026quot;.\u003c/p\u003e\n\u003ch3 id=\"populate-the-private-repository\"\u003ePopulate the private repository\u003c/h3\u003e\n\u003cp\u003eOpen a shell and type the following commands\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003egit clone https://github.com/ObelusFamily/Anythink-Market-kqkg9ci8\nmv Anythink-Market-kqkg9ci8 Anythink-Market-private\ncd Anythink-Market-private/\nls -la\ngit remote -v\ngit remote add upstream https://github.com/ObelusFamily/Anythink-Market-kqkg9ci8\ngit remote set-url origin https://github.com/gmacario/Anythink-Market-private.git\ngit branch -av\ngit fetch --all\ngit push -u --tags origin main\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThat\u0026#39;s it!\u003c/p\u003e\n\u003ch3 id=\"add-features-to-the-private-fork\"\u003eAdd features to the private fork\u003c/h3\u003e\n\u003cp\u003eNow on you may work on \u003ccode\u003eorigin\u003c/code\u003e (your private fork) as usual.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003egit checkout -b feat/my-feature\n# Do something\ngit commit -m \u0026quot;Blah blah blah\u0026quot;\ngit push -u origin feat/my-feature\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eYou may now create pull requests to your private fork, run GitHub Actions to build and test your changes, etc.\u003c/p\u003e\n\u003ch3 id=\"create-a-pull-request-to-upstream-repository\"\u003eCreate a Pull Request to upstream repository\u003c/h3\u003e\n\u003cp\u003eWhen you are ready to submit your changes upstream you just have to do the following:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003egit checkout feat/my-feature\ngit push upstream feat/my-feature\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003ethen create your Pull Request to the upstream repository.\u003c/p\u003e\n\u003c!-- EOF --\u003e\n"},"config":{"title":"gmacario.github.io","description":"Gianpaolo Macario's public rants","social":{"github":{"name":"gmacario","link":"https://github.com/gmacario"},"twitter":{"name":"gpmacario","link":"https://www.twitter.com/gpmacario"}}}},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"2023-05-07-howto-github-private-mirror"},"buildId":"_vaTkJTWlCRld83YNvRA6","runtimeConfig":{},"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-144e5fa6fafab6397d9c.js"></script><script src="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" async=""></script><script src="/_next/static/chunks/framework.1a5e6c0bcaecf178eee2.js" async=""></script><script src="/_next/static/chunks/commons.a817edd9b2693fcc6af8.js" async=""></script><script src="/_next/static/chunks/main-daaff4f95c13923f49a5.js" async=""></script><script src="/_next/static/chunks/pages/_app-041b1432faef8bf5f62a.js" async=""></script><script src="/_next/static/chunks/b38cc82cec06c0ea8b096def674947a423bb2764.260eb1ac110a53311620.js" async=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-1c9a30b06d2f3be2ac9c.js" async=""></script><script src="/_next/static/_vaTkJTWlCRld83YNvRA6/_buildManifest.js" async=""></script><script src="/_next/static/_vaTkJTWlCRld83YNvRA6/_ssgManifest.js" async=""></script></body></html>